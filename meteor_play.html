<head>
  <title>Playin' Around With Meteor</title>
</head>

<body>
  {{> quizList}}
  {{> bodyTemplate}}
</body>


<template name="bodyTemplate">
  {{#if mode_is_takeQuiz}}
    {{> selectedQuiz}} <!-- Take the Quiz -->
  {{/if}}

  {{#if mode_is_createQuiz}}
    {{> createQuiz}}
  {{/if}}
</template>



<template name="quizList">
  <!-- List all quizzes -->
  <ul>
    {{#each quizzes}}
      <li><span class={{name}}>{{name}}</span> by {{author}}</li>
    {{/each}}
  </ul>

  <h3>The chosen quiz is <span style="text-decoration: underline;">{{selectedQuiz.name}}</span>
    <button id="btnClearChosenQuiz"> clear</button></h3>
  <h4>Your selected Mode is {{selectedMode}}</h4>
  <br>
  <h3>Select Quiz Mode</h3>
  <div class="btn btn-inverse" id="btnCreateQuizMode">Create Quiz Mode</div>
  <div class="btn btn-inverse" id="btnTakeQuizMode">Take Quiz Mode</div>
  <br>
  <br>

</template>


<template name="selectedQuiz">
  <h3>You're playing a quiz by {{quiz.author}}</h3>
  {{#each quiz.questions}}

  <h2>{{text}}</h2>

    {{#each answers}}
      <input type="checkbox" value="1">
      {{text}}
      <br>
    {{/each}}


  {{/each}}

  <br>
  <input type="button" value="submitQuizAnswers" />

</template>



<template name="createQuiz">
  <h2>Let's create a quiz!</h2>

  Quiz Name: <input type="text" id="newQuizName" value="{{quiz.name}}"/>
  <br>


  <div id="categories">

  {{#each quiz.categories}}
    <div class="category">
      <p>{{name}}</p>
      <!-- No Description -->
      <!-- <p>{{description}}</p> -->
    </div>
  {{/each}}

  {{#if new_category}}
    <div class="row">
      <div class="span2">Add Category:</div><div class="span5"><input type="text" id="quizCategory" placeholder="category name" /></div>
    </div>
    <div class="row">
      <div class="span2">Description:</div><div class="span10"><input type="textarea" id="quizCategoryDescription" /></div>
    </div>
    <div class="row">
      <div class="span12">
        <div class="alert btn btn-inverse" id="btnAddCategory">&plus; Add</div>
      </div>
    </div>


  {{else}}
    <div class="btn btn-inverse" id="btnNewCategory">&plus; Category</div>
  {{/if}} <!-- End new_category If -->

  </div> <!-- End Categories Section -->


  <br><br>


  <!-- Start Questions Section -->


    <!-- Show All Questions -->
  <div class="questionList">
    {{#each quiz.questions}}
      <div class="question">
        <p class="questiontext">{{text}}</p>

        {{#each answers}}
          <div class="answer">
            <p>Answer: {{text}}</p>
            <p>Affected Categories: {{affected_categories}}</p>
          </div>
        {{/each}}

      </div> <!-- end div.question -->
    {{/each}}


  </div> <!-- end div.questionList -->




  <p>Your currently selected question: {{currentQuestionText}}
    <button id="btnClearCurrentQuestion" class="btn btn-small">clear question</button>
  </p>

  {{#if new_question}}

  <div class="newQuizQuestion">

    Question: <input type="text" id="questionInput" value="{{currentQuestionText}}" />

    <br>

    {{#if new_answer}}

    <br><br>
      <div class="answer">
        Answer: <input type="text" id="answerInput" />

        <fieldset>
              <p>
                 <label>Answer Category</label>
                 <select class="answerCategory">

                   {{#each quiz.categories}}
                   <option value="{{name}}">{{name}}</option>
                   {{/each}}

                 </select>
              </p>
           </fieldset>

        <button class="btn" type="button" id="btnSaveAnswer">Save Answer</button>
        <br><br>

       </div> <!-- End answer Div -->

    {{else}}
    <br>
    <div class="btn btn-inverse" id="btnNewAnswer">&plus; Answer</div>


    {{/if}} <!-- End new_answer If -->


    <div class="btn btn-inverse" id="btnSaveQuestion">&plus; Save Question</div>
  </div> <!-- End Quiz Question Div -->




  {{else}} <!-- If NOT new_question -->
    <br>
    <div class="btn btn-inverse" id="btnNewQuestion">&plus; Question</div>

  {{/if}}



  <!-- End Questions Section -->






  <br><br><br>
  <button class="btn btn-large btn-primary" id="createQuiz" type="button">Create Quiz!</button>
</template>


